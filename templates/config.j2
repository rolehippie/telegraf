#jinja2: lstrip_blocks: True
[agent]
  interval = "{{ telegraf_interval }}"
  round_interval = {{ telegraf_round_interval | lower }}
  metric_batch_size = {{ telegraf_metric_batch_size }}
  metric_buffer_limit = {{ telegraf_metric_buffer_limit }}
  collection_jitter = "{{ telegraf_collection_jitter }}"
  flush_interval = "{{ telegraf_flush_interval }}"
  flush_jitter = "{{ telegraf_flush_jitter }}"
  precision = "{{ telegraf_precision }}"
  debug = {{ telegraf_debug | lower }}
  quiet = {{ telegraf_quiet | lower }}
  logfile = "{{ telegraf_logfile }}"
  hostname = "{{ telegraf_hostname }}"
  omit_hostname = {{ telegraf_omit_hostname | lower }}

[[outputs.prometheus_client]]
  listen = "{{ telegraf_prometheus_listen }}"
  basic_username = "{{ telegraf_prometheus_username }}"
  basic_password = "{{ telegraf_prometheus_password }}"
{% if telegraf_plugins_default is defined and telegraf_plugins_default is iterable %}
{% for item in telegraf_plugins_default %}
{% if item.state | default("present") == "present" %}

[[inputs.{{ item.plugin }}]]
{% if item.interval is defined %}
    interval = "{{ item.interval }}s"
{% endif %}
{% if item.config is defined and item.config is iterable %}
{% for item in item.config %}
    {{ item }}
{% endfor %}
{% else %}
    # no configuration
{% endif %}
{% endif %}
{% endfor %}
{% endif %}
